{"version":3,"sources":["webpack://harvester-manager-0.1.0/./edit/harvesterhci.io.management.cluster.vue?9727","webpack://harvester-manager-0.1.0/edit/harvesterhci.io.management.cluster.vue","webpack://harvester-manager-0.1.0/./edit/harvesterhci.io.management.cluster.vue?48b0","webpack://harvester-manager-0.1.0/./edit/harvesterhci.io.management.cluster.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","mode","value","errors","doneRoute","generateYaml","on","saveOverride","e","staticClass","isView","_e","model","callback","$$v","expression","_v","_s","t","mgmt","id","onMembershipUpdate","staticRenderFns","REAL_TYPE","RANCHER_CLUSTER","components","Banner","ClusterMembershipEditor","NameNsDescription","CruResource","Tab","Tabbed","Labels","AgentEnv","mixins","props","type","required","data","membershipUpdate","computed","methods","done","name","params","resource","namespace","set","component"],"mappings":"wOAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,KAAON,EAAIO,KAAK,SAAWP,EAAIQ,MAAM,OAASR,EAAIS,OAAO,qBAAoB,EAAK,aAAaT,EAAIU,UAAU,gBAAgBV,EAAIW,cAAcC,GAAG,CAAC,OAASZ,EAAIa,aAAa,MAAQ,SAAUC,GAAI,OAAOd,EAAIS,OAASK,KAAO,CAACV,EAAG,MAAM,CAACW,YAAY,SAAS,CAAGf,EAAIgB,OAA8VhB,EAAIiB,KAA1Vb,EAAG,oBAAoB,CAACE,MAAM,CAAC,KAAON,EAAIO,KAAK,YAAa,EAAM,aAAa,qBAAqB,mBAAmB,2BAA2B,oBAAoB,4BAA4B,0BAA0B,mCAAmCW,MAAM,CAACV,MAAOR,EAAS,MAAEmB,SAAS,SAAUC,GAAMpB,EAAIQ,MAAMY,GAAKC,WAAW,YAAqB,GAAGjB,EAAG,SAAS,CAACE,MAAM,CAAC,aAAY,IAAO,CAACF,EAAG,MAAM,CAACE,MAAM,CAAC,KAAO,cAAc,YAAY,2BAA2B,OAAS,IAAI,CAAEN,EAAU,OAAEI,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIsB,GAAG,IAAItB,EAAIuB,GAAGvB,EAAIwB,EAAE,sCAAsC,OAAOxB,EAAIiB,KAAKb,EAAG,0BAA0B,CAACE,MAAM,CAAC,KAAON,EAAIO,KAAK,YAAYP,EAAIQ,MAAMiB,KAAOzB,EAAIQ,MAAMiB,KAAKC,GAAK,MAAMd,GAAG,CAAC,oBAAoBZ,EAAI2B,uBAAuB,GAAGvB,EAAG,WAAW,CAACE,MAAM,CAAC,KAAON,EAAIO,MAAMW,MAAM,CAACV,MAAOR,EAAS,MAAEmB,SAAS,SAAUC,GAAMpB,EAAIQ,MAAMY,GAAKC,WAAW,WAAWjB,EAAG,SAAS,CAACE,MAAM,CAAC,KAAON,EAAIO,MAAMW,MAAM,CAACV,MAAOR,EAAS,MAAEmB,SAAS,SAAUC,GAAMpB,EAAIQ,MAAMY,GAAKC,WAAW,YAAY,IAAI,IAC14CO,EAAkB,G,4JCetB,MAAMC,EAAY,OAAKC,gBAER,OACfC,YACAC,cACAC,+BACAC,yBACAC,mBACAC,WACAC,cACAC,cACAC,iBAGAC,gBAEAC,OACAlC,MACAmC,YACAC,aAGAnC,OACAkC,YACAC,cAIAC,OACA,OAAAC,sBAGAC,UACAnC,eACA,WACA,mBAEA,yCACA,wCACA,2BAEA,YAEA,8BAEA,YAKAoC,SACAC,OACA,6BACAC,+CACAC,QACAC,wBACAC,wCACA1B,gCAIA,qBACA2B,gDACA,iDACA,2BAGAA,0CAEA,wBAEA,mCACA,4BACA,kDAIA1B,sBACA,wCC9FyZ,I,YCOrZ2B,EAAY,eACd,EACAvD,EACA6B,GACA,EACA,KACA,KACA,MAIa,aAAA0B,E","file":"harvester-manager-0.1.0.umd.min.edit.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('CruResource',{attrs:{\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors,\"validation-passed\":true,\"done-route\":_vm.doneRoute,\"generate-yaml\":_vm.generateYaml},on:{\"finish\":_vm.saveOverride,\"error\":function (e){ return _vm.errors = e; }}},[_c('div',{staticClass:\"mt-20\"},[(!_vm.isView)?_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"namespaced\":false,\"name-label\":\"cluster.name.label\",\"name-placeholder\":\"cluster.name.placeholder\",\"description-label\":\"cluster.description.label\",\"description-placeholder\":\"cluster.description.placeholder\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}):_vm._e()],1),_c('Tabbed',{attrs:{\"side-tabs\":true}},[_c('Tab',{attrs:{\"name\":\"memberRoles\",\"label-key\":\"cluster.tabs.memberRoles\",\"weight\":3}},[(_vm.isEdit)?_c('Banner',{attrs:{\"color\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.t('cluster.memberRoles.removeMessage'))+\" \")]):_vm._e(),_c('ClusterMembershipEditor',{attrs:{\"mode\":_vm.mode,\"parent-id\":_vm.value.mgmt ? _vm.value.mgmt.id : null},on:{\"membership-update\":_vm.onMembershipUpdate}})],1),_c('AgentEnv',{attrs:{\"mode\":_vm.mode},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_c('Labels',{attrs:{\"mode\":_vm.mode},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport CruResource from '@shell/components/CruResource';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport Tabbed from '@shell/components/Tabbed';\nimport { HCI, SCHEMA, CAPI, VIRTUAL_HARVESTER_PROVIDER } from '@shell/config/types';\nimport ClusterMembershipEditor from '@shell/components/form/Members/ClusterMembershipEditor';\nimport { Banner } from '@components/Banner';\nimport Labels from '@shell/edit/provisioning.cattle.io.cluster/Labels';\nimport AgentEnv from '@shell/edit/provisioning.cattle.io.cluster/AgentEnv';\nimport { set, get, clone } from '@shell/utils/object';\nimport { CAPI as CAPI_LABEL } from '@shell/config/labels-annotations';\n\nimport { createYaml } from '@shell/utils/create-yaml';\n\nconst REAL_TYPE = CAPI.RANCHER_CLUSTER;\n\nexport default {\n  components: {\n    Banner,\n    ClusterMembershipEditor,\n    NameNsDescription,\n    CruResource,\n    Tab,\n    Tabbed,\n    Labels,\n    AgentEnv\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return { membershipUpdate: {} };\n  },\n\n  computed: {\n    generateYaml() {\n      return () => {\n        const resource = this.value;\n\n        const inStore = this.$store.getters['currentStore'](resource);\n        const schemas = this.$store.getters[`${ inStore }/all`](SCHEMA);\n        const clonedResource = clone(resource);\n\n        delete clonedResource.isSpoofed;\n\n        const out = createYaml(schemas, REAL_TYPE, clonedResource);\n\n        return out;\n      };\n    },\n  },\n\n  methods: {\n    done() {\n      return this.$router.replace({\n        name:   'c-cluster-product-resource-namespace-id',\n        params: {\n          resource:  HCI.CLUSTER,\n          namespace: this.value.metadata.namespace,\n          id:        this.value.metadata.name,\n        },\n      });\n    },\n    async saveOverride() {\n      set(this.value, 'metadata.labels', {\n        ...(get(this.value, 'metadata.labels') || {}),\n        [CAPI_LABEL.PROVIDER]: VIRTUAL_HARVESTER_PROVIDER,\n      });\n\n      set(this.value, 'type', REAL_TYPE);\n\n      await this.save(...arguments);\n\n      this.value.waitForMgmt().then(() => {\n        if (this.membershipUpdate.save) {\n          this.membershipUpdate.save(this.value.mgmt.id);\n        }\n      });\n    },\n    onMembershipUpdate(update) {\n      this.$set(this, 'membershipUpdate', update);\n    },\n  },\n};\n</script>\n\n<template>\n  <CruResource\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    :validation-passed=\"true\"\n    :done-route=\"doneRoute\"\n    :generate-yaml=\"generateYaml\"\n    @finish=\"saveOverride\"\n    @error=\"e=>errors = e\"\n  >\n    <div class=\"mt-20\">\n      <NameNsDescription\n        v-if=\"!isView\"\n        v-model=\"value\"\n        :mode=\"mode\"\n        :namespaced=\"false\"\n        name-label=\"cluster.name.label\"\n        name-placeholder=\"cluster.name.placeholder\"\n        description-label=\"cluster.description.label\"\n        description-placeholder=\"cluster.description.placeholder\"\n      />\n    </div>\n\n    <Tabbed :side-tabs=\"true\">\n      <Tab\n        name=\"memberRoles\"\n        label-key=\"cluster.tabs.memberRoles\"\n        :weight=\"3\"\n      >\n        <Banner\n          v-if=\"isEdit\"\n          color=\"info\"\n        >\n          {{ t('cluster.memberRoles.removeMessage') }}\n        </Banner>\n        <ClusterMembershipEditor\n          :mode=\"mode\"\n          :parent-id=\"value.mgmt ? value.mgmt.id : null\"\n          @membership-update=\"onMembershipUpdate\"\n        />\n      </Tab>\n      <AgentEnv\n        v-model=\"value\"\n        :mode=\"mode\"\n      />\n      <Labels\n        v-model=\"value\"\n        :mode=\"mode\"\n      />\n    </Tabbed>\n  </CruResource>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./harvesterhci.io.management.cluster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./harvesterhci.io.management.cluster.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./harvesterhci.io.management.cluster.vue?vue&type=template&id=7d6a4140&\"\nimport script from \"./harvesterhci.io.management.cluster.vue?vue&type=script&lang=js&\"\nexport * from \"./harvesterhci.io.management.cluster.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}