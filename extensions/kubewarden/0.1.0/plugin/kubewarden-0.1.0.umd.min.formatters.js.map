{"version":3,"sources":["webpack://kubewarden-0.1.0/./formatters/PolicySummaryGraph.vue?bcbe","webpack://kubewarden-0.1.0/formatters/PolicySummaryGraph.vue","webpack://kubewarden-0.1.0/./formatters/PolicySummaryGraph.vue?e3ac","webpack://kubewarden-0.1.0/./formatters/PolicySummaryGraph.vue","webpack://kubewarden-0.1.0/./formatters/PolicySummaryGraph.vue?61de","webpack://kubewarden-0.1.0/./formatters/PolicySummaryGraph.vue?1df3","webpack://kubewarden-0.1.0/./formatters/PolicySummaryGraph.vue?7631"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","row","id","show","scopedSlots","_u","key","fn","_l","obj","_obj","class","textColor","_v","_s","label","value","_e","proxy","colorParts","linkTo","displayLabel","staticRenderFns","components","ProgressBarMulti","props","type","required","default","data","relatedPolicies","computed","stateParts","out","color","sort","component","___CSS_LOADER_API_IMPORT___","exports","push","module","i","content","__esModule","locals","add"],"mappings":"wMAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAQ,KAAEI,EAAG,YAAY,CAACE,YAAY,mBAAmBC,MAAM,CAAC,UAAY,MAAM,aAAaP,EAAIQ,IAAIC,GAAG,QAAUT,EAAIU,KAAO,QAAU,SAAS,OAAS,KAAKC,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,WAAW,MAAO,CAAEd,EAAQ,KAAEI,EAAG,QAAQ,CAACE,YAAY,SAAS,CAACF,EAAG,QAAQJ,EAAIe,GAAIf,EAAc,YAAE,SAASgB,GACnZ,IAAIC,EACJ,OAAOb,EAAG,KAAK,CAACS,IAAIG,EAAIH,KAAK,CAACT,EAAG,KAAK,CAACE,YAAY,kBAAkBY,OAAQD,EAAO,GAAIA,EAAKD,EAAIG,YAAa,EAAMF,IAAQ,CAACjB,EAAIoB,GAAG,IAAIpB,EAAIqB,GAAGL,EAAIM,OAAO,OAAOlB,EAAG,KAAK,CAACE,YAAY,cAAc,CAACN,EAAIoB,GAAG,IAAIpB,EAAIqB,GAAGL,EAAIO,OAAO,YAAW,KAAKvB,EAAIwB,OAAOC,OAAM,IAAO,MAAK,EAAM,aAAa,CAACrB,EAAG,mBAAmB,CAACE,YAAY,OAAOC,MAAM,CAAC,OAASP,EAAI0B,cAAe1B,EAAU,OAAEI,EAAG,SAAS,CAACG,MAAM,CAAC,GAAKP,EAAI2B,SAAS,CAAC3B,EAAIoB,GAAG,IAAIpB,EAAIqB,GAAGrB,EAAI4B,cAAc,OAAOxB,EAAG,OAAO,CAACJ,EAAIoB,GAAGpB,EAAIqB,GAAGrB,EAAI4B,kBAAkB,GAAGxB,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACN,EAAIoB,GAAG,UACpjBS,EAAkB,G,oCCIP,GACfC,YAAAC,yBAEAC,OACAxB,KACAyB,YACAC,aAGAZ,OACAW,YACAE,cAGAR,QACAM,YACAE,eAIA,cACA,0DAGAC,OACA,OAAAC,qBAGAC,UACA5B,OACA,iCAGA6B,aACA,WAEA,2CACA,8DACA,oBACA,cAEA,KACAC,cAEAA,MACA3B,MACAS,QACAmB,+BACAtB,YACAI,QACAmB,0BAKA,qDAGAhB,aACA,WAEA,+BACA,WACAc,oBAEAA,YACAC,cACAlB,cACAmB,aAKA,qDAGAd,eACA,uCAEA,kBACA,sBAGA,QC1FyY,I,wBCQrYe,EAAY,eACd,EACA5C,EACA8B,GACA,EACA,KACA,KACA,MAIa,aAAAc,E,gCClBf,IAAIC,EAA8B,EAAQ,QAC1CC,EAAUD,GAA4B,GAEtCC,EAAQC,KAAK,CAACC,EAAOC,EAAI,+qBAAkrB,KAE3sBD,EAAOF,QAAUA,G,oCCNjB,W,qBCGA,IAAII,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQd,SACnB,kBAAZc,IAAsBA,EAAU,CAAC,CAACF,EAAOC,EAAIC,EAAS,MAC7DA,EAAQE,SAAQJ,EAAOF,QAAUI,EAAQE,QAE5C,IAAIC,EAAM,EAAQ,QAAkEjB,QACvEiB,EAAI,WAAYH,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa","file":"kubewarden-0.1.0.umd.min.formatters.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.show)?_c('v-popover',{staticClass:\"text-center hand\",attrs:{\"placement\":\"top\",\"open-group\":_vm.row.id,\"trigger\":_vm.show ? 'click' : 'manual',\"offset\":\"1\"},scopedSlots:_vm._u([{key:\"popover\",fn:function(){return [(_vm.show)?_c('table',{staticClass:\"fixed\"},[_c('tbody',_vm._l((_vm.stateParts),function(obj){\nvar _obj;\nreturn _c('tr',{key:obj.key},[_c('td',{staticClass:\"text-left pr-20\",class:( _obj = {}, _obj[obj.textColor] = true, _obj )},[_vm._v(\" \"+_vm._s(obj.label)+\" \")]),_c('td',{staticClass:\"text-right\"},[_vm._v(\" \"+_vm._s(obj.value)+\" \")])])}),0)]):_vm._e()]},proxy:true}],null,false,3622895006)},[_c('ProgressBarMulti',{staticClass:\"mb-5\",attrs:{\"values\":_vm.colorParts}}),(_vm.linkTo)?_c('n-link',{attrs:{\"to\":_vm.linkTo}},[_vm._v(\" \"+_vm._s(_vm.displayLabel)+\" \")]):_c('span',[_vm._v(_vm._s(_vm.displayLabel))])],1):_c('div',{staticClass:\"text-center text-muted\"},[_vm._v(\" â€” \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { sortBy } from '@shell/utils/sort';\n\nimport ProgressBarMulti from '@shell/components/ProgressBarMulti';\n\nimport { colorForStatus, stateSort } from '../plugins/kubewarden/policy-class';\n\nexport default {\n  components: { ProgressBarMulti },\n\n  props: {\n    row: {\n      type:     Object,\n      required: true\n    },\n\n    label: {\n      type:    String,\n      default: null\n    },\n\n    linkTo: {\n      type:    Object,\n      default: null\n    }\n  },\n\n  async fetch() {\n    this.relatedPolicies = await this.row.allRelatedPolicies();\n  },\n\n  data() {\n    return { relatedPolicies: [] };\n  },\n\n  computed: {\n    show() {\n      return this.stateParts.length > 0;\n    },\n\n    stateParts() {\n      const out = {};\n\n      for ( const r of this.relatedPolicies ) {\n        const state = r.status?.policyStatus;\n        const textColor = colorForStatus(state);\n        const key = `${ textColor }/${ state }`;\n\n        if ( out[key] ) {\n          out[key].value += 1;\n        } else {\n          out[key] = {\n            key,\n            label:     state,\n            color:     textColor.replace(/text-/, 'bg-'),\n            textColor,\n            value:     1,\n            sort:      stateSort(textColor, state),\n          };\n        }\n      }\n\n      return sortBy(Object.values(out), 'sort:desc');\n    },\n\n    colorParts() {\n      const out = {};\n\n      for ( const p of this.stateParts ) {\n        if ( out[p.color] ) {\n          out[p.color].value += 1;\n        } else {\n          out[p.color] = {\n            color: p.color,\n            value: p.value,\n            sort:  p.sort,\n          };\n        }\n      }\n\n      return sortBy(Object.values(out), 'sort:desc');\n    },\n\n    displayLabel() {\n      const count = this.relatedPolicies.length || 0;\n\n      if ( this.label ) {\n        return `${ this.label }, ${ count }`;\n      }\n\n      return `${ count }`;\n    }\n  },\n};\n</script>\n\n<template>\n  <v-popover\n    v-if=\"show\"\n    class=\"text-center hand\"\n    placement=\"top\"\n    :open-group=\"row.id\"\n    :trigger=\"show ? 'click' : 'manual'\"\n    offset=\"1\"\n  >\n    <ProgressBarMulti :values=\"colorParts\" class=\"mb-5\" />\n    <n-link v-if=\"linkTo\" :to=\"linkTo\">\n      {{ displayLabel }}\n    </n-link>\n    <span v-else>{{ displayLabel }}</span>\n\n    <template #popover>\n      <table v-if=\"show\" class=\"fixed\">\n        <tbody>\n          <tr v-for=\"obj in stateParts\" :key=\"obj.key\">\n            <td class=\"text-left pr-20\" :class=\"{[obj.textColor]: true}\">\n              {{ obj.label }}\n            </td>\n            <td class=\"text-right\">\n              {{ obj.value }}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </template>\n  </v-popover>\n  <div v-else class=\"text-center text-muted\">\n    &mdash;\n  </div>\n</template>\n\n<style lang=\"scss\">\n  .col-scale {\n    position: relative;\n\n    .trigger {\n      width: 100%;\n    }\n  }\n\n  .scale {\n    margin: 0;\n    padding: 0;\n    line-height: initial;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicySummaryGraph.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicySummaryGraph.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicySummaryGraph.vue?vue&type=template&id=7489de9b&\"\nimport script from \"./PolicySummaryGraph.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicySummaryGraph.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PolicySummaryGraph.vue?vue&type=style&index=0&id=7489de9b&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".clearfix:after,.clearfix:before{content:\\\" \\\";display:table}.clearfix:after{clear:both}.list-unstyled{margin:0;padding:0;list-style-type:none}.no-select{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize{resize:none}.hand{cursor:pointer;cursor:hand}.fixed{table-layout:fixed}.clip{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip,.force-wrap{word-wrap:break-word}.force-wrap{white-space:normal}.bordered-section{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider{margin-bottom:20px;margin-top:20px}.col-scale{position:relative}.col-scale .trigger{width:100%}.scale{margin:0;padding:0;line-height:normal}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicySummaryGraph.vue?vue&type=style&index=0&id=7489de9b&prod&lang=scss&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicySummaryGraph.vue?vue&type=style&index=0&id=7489de9b&prod&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"315fb8db\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"sourceRoot":""}